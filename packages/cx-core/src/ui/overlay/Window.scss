@import "variables";
@import "../icons/index";
@import "Overlay";

@import "variables";
@import '../../util/scss/include';

@mixin cx-window(
   $name: 'window',
   $besm: $cx-besm
) {
   $block: map-get($besm, block);
   $element: map-get($besm, element);
   $state: map-get($besm, state);
   $mod: map-get($besm, mod);

   .#{$block}#{$name} {
      @extend %cxb-overlay;
      box-sizing: border-box;
      box-shadow: 0 0 5px 1px rgba(0, 0, 0, 0.29);
      background: transparent;
      z-index: 1000;

      &.#{$state}resizable {
         &.#{$state}active {
            box-shadow: 0 0 50px 10px rgba(0, 0, 0, 0.29);
         }
      }

      &.#{$mod}alert {
         min-width: 300px;
      }
   }

   .#{$element}#{$name}-header {
      background: rgba(246, 246, 246, 0.9);
      padding: 10px 15px;
      position: relative; //put on top of modal backdrop
      box-sizing: border-box;
      cursor: pointer;

      .#{$state}active & {
         //background: rgba(6, 178, 255, 0.9);
      }
   }

   .#{$element}#{$name}-footer {
      background: rgba(246, 246, 246, 0.9);
      padding: 10px 20px;
      position: relative;
      box-sizing: border-box;

      &:after {
         clear: both;
         visibility: hidden;
         display: block;
         font-size: 0;
         content: " ";
         height: 0;
      }

      .#{$mod}alert & {
         text-align: center;
      }
   }

   .#{$element}#{$name}-body {
      background: white;
      overflow: auto;
      position: relative; //put on top of modal backdrop
      box-sizing: border-box;

      .#{$mod}alert & {
         padding: 40px;
         text-align: center;
      }
   }

   .#{$element}#{$name}-close {
      @extend %cx-icon-close;
      position: absolute;
      right: 5px;
      top: calc(50% - 15px);
      background-position: center;
      background-size: 18px 18px;
      border: none;
      width: 30px;
      float: right;
      height: 30px;
      display: block;
      border-radius: 50%;

      &:hover {
         @each $rule, $value in map-get($cx-list-item, hover) {
            #{$rule}: $value;
         }
      }

      &:focus {
         @each $rule, $value in map-get($cx-list-item, selected-focus) {
            #{$rule}: $value;
         }
      }

      &:active {
         @each $rule, $value in map-get($cx-list-item, active) {
            #{$rule}: $value;
         }
      }
   }

   .#{$element}#{$name}-modal-backdrop {
      @extend %cxe-overlay-modal-backdrop;
   }
}

@if (cx-include('cx/widgets/Window')) {
   @include cx-window();
}

