@import "Field";
@import "../overlay/Dropdown";

@mixin cx-select(
   $name: 'select',
   $state-style-map: $cx-input-state-style-map,
   $placeholder: $cx-input-placeholder,
   $empty-text: $cx-empty-text,
   $width: $cx-default-input-width,
   $besm: $cx-besm
) {
   $block: map-get($besm, block);
   $element: map-get($besm, element);
   $state: map-get($besm, state);
   $mod: map-get($besm, mod);

   .#{$block}#{$name} {
      @include cxb-field(
         $besm,
         $state-style-map: $state-style-map,
         $width: $width
      );
   }

   .#{$element}#{$name}-select {
      @include cxe-field-input(
         $besm,
         $state-style-map,
         $placeholder: $placeholder,
         $overrides: (
            padding: cx-top($cx-default-input-padding) calc(#{cx-right($cx-default-input-padding)} + #{$cx-default-clear-size} - #{cx-right($cx-default-input-padding)}) cx-bottom($cx-default-input-padding) cx-left($cx-default-input-padding),
            -webkit-appearance: none,
            -moz-appearance: none,
            -ms-appearance: none,
            appearance: none
         )
      );

      @extend %cx-icon-dropdown-arrow;
      background-position: right $cx-default-input-padding center;

      &::-ms-expand {
         display: none;
         margin: 0;
         padding: 0;
      }

      option {
         background-color: $cx-default-dropdown-background-color;
      }
   }
}

@if (cx-call-once('cx/widgets/Select')) {
   @include cx-select;
}