@import "Field";

@mixin cx-calendar(
   $name: 'calendar',
   $state-style-map: $cx-input-state-style-map,
   $width: $cx-default-input-width,
   $besm: $cx-besm
) {
   $block: map-get($besm, block);
   $element: map-get($besm, element);
   $state: map-get($besm, state);
   $mod: map-get($besm, mod);

   .#{$block}calendar {
      @include cxe-field-input($besm, $state-style-map, $input: false);
      width: 18em;

      table {
         border-spacing: 0;
         width: 100%;
      }

      td, th {
         text-align: center;
         width: 2em;
         line-height: 2em;
      }

      td.#{$state}today {
         background: rgba(220, 250, 183, 0.5);
      }

      td.#{$state}outside {
         color: lightgray;
      }

      td.#{$state}unselectable {
         @each $rule, $value in map-get($cx-list-item, disabled) {
            #{$rule}: $value;
         }
      }

      td.#{$state}cursor, .#{$element}#{$name}-header td:hover {
         @each $rule, $value in map-get($cx-list-item, hover) {
            #{$rule}: $value;
         }
      }

      td.#{$state}selected {
         @each $rule, $value in map-get($cx-list-item, selected) {
            #{$rule}: $value;
         }
      }

      &:not(.#{$state}disabled) {
         td {
            cursor: pointer;
         }
      }

      &:focus {

         td.#{$state}cursor, .#{$element}#{$name}-header td:hover {
            @each $rule, $value in map-get($cx-list-item, hover-focus) {
               #{$rule}: $value;
            }

            &:active {
               @each $rule, $value in map-get($cx-list-item, active) {
                  #{$rule}: $value;
               }
            }
         }

         td.#{$state}selected {
            @each $rule, $value in map-get($cx-list-item, selected-focus) {
               #{$rule}: $value;
            }
         }
      }
   }

   .#{$block}#{$name}.#{$state}disabled {
      background-color: transparent;
      border-color: transparent;
      color: darken(#fff, 18);
      cursor: not-allowed;
   }
}

@if (cx-include('cx/widgets/Calendar')) {
   @include cx-calendar();
}